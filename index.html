<!DOCTYPE html>
<html>
<head>
	<title>Вторая ШРИ в Москве, 2013</title>

	<link type="text/css" href="./index.css" rel="stylesheet" />
</head>
<body>
	<h1 data-bind="click: page.pusher('/')">Школа Разработки Интерфейсов, Москва, 2013</h1>

	<span data-bind="visible: !data">Loading...</span>

	<ul data-bind="css: { 'has-selected': !page.is('index') }" class="menu list">
		<li data-bind="css: { selected: page.is(/^student/) }" class="list-item item1">
			<a href="#students" class="link">Студенты</a>
		</li>
		<li data-bind="css: { selected: page.is(/^lecture/) }" class="list-item item2">
			<a href="#lectures" class="link">Лекции</a>
		</li>
	</ul>

	<div data-bind="if: page.is('index')">
		<p>Тра-та-та, та-ра та-та</p>
	</div>

	<div data-bind="css: { 'has-selected': page.args().length > 0 }" class="menu2">
		<div data-bind="if: page.is(/^student/) && data()" class="students">
			<ul data-bind="foreach: _.sortBy(data().students, prop('name'))" class="list student-list">
				<li data-bind="css: { selected: id == $root.page.args()[0] }" class="list-item student-list-item">
					<a data-bind="text: name, attr: { href: '#student/' + id }" href class="link"></a>
				</li>
			</ul>
		</div>
		<div data-bind="if: page.is(/^lecture/) && data()" class="lectures">
			<ul data-bind="foreach: _.sortBy(data().lectures, prop('native_id'))" class="list lecture-list">
				<li data-bind="css: { selected: id == $root.page.args()[0] }" class="list-item lecture-list-item">
					<a data-bind="text: name, attr: { href: '#lecture/' + id }" href class="link"></a>
				</li>
			</ul>
		</div>
	</div>

	<div data-bind="if: data() && page.is('student')" class="student">
		<div data-bind="with: _.find(data().students, equals(page.args()[0], prop('id')))">
			<img src data-bind="attr: { src: photo }" />

			<p data-bind="text: 'Город: ' + city, visible: city" class="student-city-name"></p>

			<div data-bind="if: social.length > 0">
				Другие нас. пункты:
				<ul data-bind="foreach: social" class="list" style="display: inline-block; margin: 0">
					<li class="list-item">
						<a href data-bind="attr: { href: link }, text: link">
						</a><span data-bind="if: $index() < $parent.social.length - 1">,</span>
					</li>
				</ul>
			</div>

			<div data-bind="foreach: $root.withLinks(about).split('\n\n')">
				<p data-bind="html: $data"></p>
			</div>
		</div>
	</div>

	<!--[if gte IE 6]>
	<script src="http://rawgithub.com/balupton/history.js/master/scripts/compressed/history.js"></script>
	<![endif]-->
	<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.4.4/underscore-min.js"></script>
	<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/knockout/knockout-2.2.1.js"></script>
	<script type="text/javascript" src="./index.js"></script>
</body>
</html>